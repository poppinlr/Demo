<script type="text/javascript" src="jquery-2.2.3.min.js"></script>
<script type="text/javascript" src="handlebars-v4.0.5.js"></script>
<div id="target01"></div>
<script id="template01" type="text/x-handlebars-template">
    <div class="post">
        {{> userMessage tagName="h1" }}

        <h1>Comments</h1>

        {{#each comments}}
        {{> userMessage tagName="h2" }}
        {{/each}}
    </div>
</script>

<script>
    Handlebars.registerPartial('userMessage',
            '<{{tagName}}>By {{author.firstName}} {{author.lastName}}</{{tagName}}>'
            + '<div class="body">{{body}}</div>');
    var context = {
        author: {firstName: "Alan", lastName: "Johnson"},
        body: "I Love Handlebars",
        comments: [{
            author: {firstName: "Yehuda", lastName: "Katz"},
            body: "Me too!"
        }]
    };

    var template=Handlebars.compile($("#template01").html());
    $("#target01").html(template(context));
</script>